#!/usr/bin/env ruby

require "bundler/setup"
require "sector_watch"
require 'date'
require 'colorize'
require 'csv'

sectors = {'FTEC' => 'Information Technology',
           'FNCL' => 'Financials',
           'FHLC' => 'Health Care',
           'FENY' => 'Energy',
           'FREL' => 'Real Estate',
           'FIDU' => 'Industrials',
           'FUTY' => 'Utilities',
           'FDIS' => 'Consumer Discretionary',
           'FSTA' => 'Consumer Staples',
           'FMAT' => 'Materials',
           'FCOM' => 'Telecommunication'}

#=begin
sectors = {}
CSV.foreach("data/sp500_companies.csv", :headers => true) do |row|
    sectors[row[0]] = row[1]
end
#=end

stocks = []
months = [1, 3, 6, 9, 12]

begin
    sectors.each do |symbol, name|
        puts "Getting #{symbol}..."
        stock = SectorWatch::Stock.performance(symbol, months)
        stocks << stock
    end
rescue Exception => msg 
    puts msg
end

SectorWatch::Stock.print_results(stocks, months)


